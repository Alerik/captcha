<div class="main">
  <div class="header-holder">
    <h1>{{name}}</h1>
    <div class="icon-holder" *ngIf="dataset" (click)="selectedIndex = 2">
      <mat-icon class="warn" *ngIf="!dataset.created" matTooltip="Yuru dataset is still being created">warning
      </mat-icon>
      <mat-icon class="alert" *ngIf="dataset.created && !dataset.reviewed" matTooltip="Your dataset is being reviewed">
        pageview</mat-icon>
      <mat-icon class="alert" *ngIf="dataset.created && dataset.reviewed && !dataset.approved"
        matTooltip="Your dataset was not approved">warning</mat-icon>
    </div>
    <div class="icon-holder settings-button">
      <button mat-icon-button color="primary" routerLink="./edit">
        <mat-icon>edit</mat-icon>
      </button>  
    </div>
   </div>

  <div>
    <mat-tab-group [selectedIndex]="selectedIndex">
      <mat-tab label="Overview">
        <div class="loader" *ngIf="!dataset">
          <mat-progress-spinner color="primary"
          mode="indeterminate">
         </mat-progress-spinner> 
        </div>
        <div class="card-holder" *ngIf="dataset">
          <mat-card class="info-card">
            <mat-card-header>
              <mat-card-title>Overview</mat-card-title>
              <mat-card-subtitle>{{dataset.completion * 100 }}% complete</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <mat-list role="list">
                <table class="overview-table" *ngIf="dataset">
                  <tbody>
                    <tr>
                      <th mat-subheader>Description</th>
                      <td>{{this.dataset.description}}</td>
                    </tr>
                    <tr>
                      <th mat-subheader>Prompt</th>
                      <td>{{this.dataset.prompt}}</td>
                    </tr>
                    <tr>
                      <th mat-subheader>Entries</th>
                      <td>{{this.dataset.entry_count}}</td>
                    </tr>
                    <tr>
                      <th mat-subheader>Annotations</th>
                      <td>{{this.dataset.annotations_total}}</td>
                    </tr>
                  </tbody>
                </table>
              </mat-list>
            </mat-card-content>   
          </mat-card>
        </div>
      </mat-tab>

      <mat-tab label="Entries">
        <div class="loader" *ngIf="!dataset">
          <mat-progress-spinner color="primary"
          mode="indeterminate">
         </mat-progress-spinner> 
        </div>
        <div class="card-holder" *ngIf="dataset">
          <app-text-index-detail-table [id]="id_dataset"></app-text-index-detail-table>
          <p>Upload more entries. </p><input type="file" (change)="fileChange($event)" placeholder="Upload entries"
          accept=".txt" />
        <button mat-raised-button color="primary" (click)="uploadClick($event)">Upload</button>
        </div>
      </mat-tab>

      <mat-tab label="Notifications">
        <div class="loader" *ngIf="!dataset">
          <mat-progress-spinner color="primary"
          mode="indeterminate">
         </mat-progress-spinner> 
        </div>
        <div class="card-holder" *ngIf="dataset">
          <mat-list role="list" class="notification-list">
            <table class="overview-table" *ngIf="dataset">
              <tbody>
                <tr *ngFor="let item of notifications">
                  <th mat-subheader>{{item.recordtime | date: 'M/d/yyyy, h:mm a'}}</th>
                  <td>{{item.message}}</td>
                </tr>
              </tbody>
            </table>
          </mat-list>
        </div>  
      </mat-tab>
    </mat-tab-group>
  </div>